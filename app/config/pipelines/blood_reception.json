{
  "role_priority": [
    "samples.extraction.lysing.blood.awaiting_reception",
    "samples.shipping.blood_!na.awaiting_shipping",
    "samples.shipping.blood_!na.awaiting_shipping.batched",

    "samples.extraction.lysing.blood",
    "samples.extraction.prelysing.blood",
    "samples.extraction.prelysing.blood.batched"
  ],
  "workflows": [{
    "accepts":  "samples.extraction.lysing.blood.awaiting_reception" ,
    "controllerName":"selection_page_controller",
    "processTitle": "Receive Tubes",
    "capacity": 96,
    "input":        {
      "role":"samples.extraction.lysing.blood.awaiting_reception",
      "model":"tubes"
    },
    "output": [
               {
                 "role":       "samples.extraction.prelysing.blood",
                 "aliquotType":"blood",
                 "not_batched":true
               }
               ]
    },
    {
      "accepts":  "samples.extraction.prelysing.blood" ,
      "controllerName":"selection_page_controller",
      "processTitle": "Batch for Prelysing transfer",
      "capacity": 96,
      "input":        {
        "role":"samples.extraction.prelysing.blood",
        "model":"tubes"
      },
      "output": [
                 {
                   "role":       "samples.extraction.prelysing.blood.batched",
                   "aliquotType":"blood"
                 }
                 ]
    },
    {
      "accepts":        "samples.extraction.prelysing.blood.batched" ,
      "controllerName": "step_controller",
      "printerType": 2,
      "buttons": [{ "action": "print", "title": "Print labels" },
                  { "action": "next", "title": "Next" }
      ],
      "processTitle":  "Prelysing transfer",
      "controllers": [{
        "controllerName":   "connected_controller",
        "behaviours": {
          "start": "row",
          "operate": "row",
          "complete": "row",
          "done": "next",
          "outputs": "print"
        },
        "input": {
          "role":  "samples.extraction.prelysing.blood.batched",
          "model": "tubes",
          "title": "Blood tube",
          "aliquotType": "blood"
        },
        "output": [{
          "role": "samples.extraction.lysing.blood",
          "model":      "tubes",
          "purpose":     "stock",
          "title":      "Blood tube",
          "aliquotType": "blood",
          "not_batched":true
        }]
      }]
    },
    {
      "accepts":  "samples.extraction.lysing.blood" ,
      "controllerName":"selection_page_controller",
      "processTitle": "Receive Tubes - Batch for Blood Lysing",
      "capacity": 96,
      "input":        {
        "role":"samples.extraction.lysing.blood",
        "model":"tubes"
      },
      "output": [
        {
          "role":       "samples.extraction.qiacube_dna_only.input_tube_dnap.batched"
        }
      ]
    },
    {
      "accepts":  "samples.shipping.blood_!na.awaiting_shipping" ,
      "controllerName":"selection_page_controller",
      "processTitle": "Sample Shipping - Batching",
      "input": {
        "role":  "samples.shipping.blood_!na.awaiting_shipping",
        "model": "tubes"
      },
      "output": [
        {
          "role": "samples.shipping.blood_!na.awaiting_shipping.batched",
          "model": "tubes"
        }
      ]
    },
    {
      "accepts":  "samples.shipping.blood_!na.awaiting_shipping.batched" ,
      "processTitle":  "Sample Shipping",
      "controllerName": "step_controller",
      "output": [{
        "role": "samples.shipping_blood_!na.shipped"
      }],
      "buttons": [
        { "action": "ship", "title": "Ship Samples"},
        { "action": "next", "title": "Done" }
      ],
      "controllers": [{
        "controllerName": "location_controller",
        "output": [{
          "role": "samples.shipping.blood_!na.shipped"
        }]
      }]
    }
  ]
}
